<?xml version="1.0"?>
<!DOCTYPE myks PUBLIC "-//YKS//MYKS">
<myks>
  <view name="zks_information_schema_indexes">
    <def><![CDATA[

SELECT
  nt.nspname AS table_schema,
  ct.relname as table_name,
  ci.relname AS index_name,
  i.indkey AS fields,
  i.indisprimary AS pri,
  i.indisunique AS uni,

CASE ci.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' END as "Type",

 u.usename as "Owner"
FROM pg_index i
    JOIN pg_class ci ON i.indexrelid = ci.oid
    JOIN pg_class ct ON i.indrelid = ct.oid
    LEFT JOIN pg_user u ON u.usesysid = ci.relowner
    LEFT JOIN pg_namespace nt ON nt.oid = ci.relnamespace
WHERE ci.relkind IN ('i','')
     AND nt.nspname NOT IN ('pg_catalog', 'pg_toast')
     AND pg_table_is_visible(ci.oid)
ORDER BY 1,2;

]]></def>
  </view>
</myks>
